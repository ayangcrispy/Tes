<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3x1</title>
    <style>
        html, body {
            height: 100%; /* Mengatur tinggi html dan body menjadi 100% */
            margin: 0; /* Menghapus margin default */
        }
        body {
            font-family: 'Courier New', Courier, monospace; /* Menerapkan font Courier New */
            text-align: center; /* Rata tengah */
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        button {
            margin: 10px 0; /* Jarak antar tombol dengan margin bawah */
            padding: 15px 25px; /* Ukuran tombol */
            font-family: 'Courier New', Courier, monospace; /* Menerapkan font pada tombol */
            cursor: pointer; /* Mengubah pointer saat hover */
        }
        button:hover {
            background-color: #555; /* Warna latar belakang tombol saat hover */
        }
        #canvas {
            border: 1px solid #000;
            width: 90%; /* Mengubah lebar canvas menjadi 90% dari body */
            height: auto;
            margin-top: 20px; /* Menambahkan jarak antara upload dan kanvas */
            cursor: pointer; /* Menunjukkan bahwa kanvas dapat diklik */
        }
        #upload {
            display: none; /* Menyembunyikan input file */
        }
        #button-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 kolom */
            gap: 10px; /* Jarak antar tombol */
            margin-top: 20px;
        }
        footer {
            margin-top: auto; /* Memastikan footer berada di bagian bawah */
            padding: 10px;
            background-color: #f1f1f1; /* Warna latar belakang footer */
            width: 100%; /* Lebar footer sama dengan body */
        }
    </style>
</head>
<body>

<h1>Pilih Halaman</h1>
<input type="file" id="upload" accept="image/*">
<canvas id="canvas" width="3103.125" height="1350"></canvas>

<div id="button-container">
    <button id="crop-left">3</button>
    <button id="crop-center">2</button>
    <button id="crop-right">1</button>
</div>

<script>
    const upload = document.getElementById('upload');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let img;

    // Array untuk urutan angka terbalik
    const reverseOrder = [3, 2, 1];

    // Fungsi untuk memuat gambar ke kanvas
    upload.addEventListener('change', (e) => {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = function(event) {
            img = new Image();
            img.onload = function() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            }
            img.src = event.target.result;
        }
        reader.readAsDataURL(file);
    });

    // Menambahkan event listener klik pada kanvas
    canvas.addEventListener('click', () => {
        upload.click(); // Memicu klik pada input file
    });

    function cropImage(x, buttonIndex) {
        const width = (canvas.height * 4) / 5; // Rasio 4:5
        const croppedCanvas = document.createElement('canvas');
        croppedCanvas.width = width;
        croppedCanvas.height = canvas.height;
        const croppedCtx = croppedCanvas.getContext('2d');
        
        croppedCtx.drawImage(canvas, x, 0, width, canvas.height, 0, 0, width, canvas.height);
        
        const link = document.createElement('a');
        link.download = `crop-${reverseOrder[buttonIndex]}.png`; // Mengubah nama file
        link.href = croppedCanvas.toDataURL();
        link.click();
    }

    document.getElementById('crop-left').addEventListener('click', () => cropImage(0, 0));
    
    document.getElementById('crop-center').addEventListener('click', () => {
        const centerX = (canvas.width - (canvas.height * 4) / 5) / 2; // Menghitung posisi tengah
        cropImage(centerX, 1);
    });
    
    document.getElementById('crop-right').addEventListener('click', () => {
        cropImage(canvas.width - (canvas.height * 4) / 5, 2);
    });

    console.log("Script Halaman 1");
</script>

<footer>
    &copy; 2025 Nama Anda. Semua hak dilindungi.
</footer>

</body>
</html>
